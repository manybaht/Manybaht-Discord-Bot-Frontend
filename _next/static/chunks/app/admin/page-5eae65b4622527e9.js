(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1282:function(e,l,t){Promise.resolve().then(t.bind(t,8596))},8596:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return n}});var a=t(7437),s=t(2265);function n(){var e;let l;let[t,n]=(0,s.useState)(!0),[d,i]=(0,s.useState)(null),[o,c]=(0,s.useState)("Loading..."),[r,u]=(0,s.useState)(null),[x,m]=(0,s.useState)(""),[p,v]=(0,s.useState)(1),[g,b]=(0,s.useState)(null),[h,f]=(0,s.useState)(null),[w,N]=(0,s.useState)(null),[j,E]=(0,s.useState)(5),[k,y]=(0,s.useState)(null),[S,C]=(0,s.useState)(!0),[R,D]=(0,s.useState)(null);async function P(){let e=await V("/donators/count","get","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(u(e.content),F("200",!1)):F("Manybot Management Panel",!1)}async function T(){var e,l;if(n(!0),d){let l=await V("/login","get","?code=".concat(d),!0);if((null==l?void 0:l.status)&&(null==l?void 0:l.message)){F(l.message,!1);let e=await V("/donators/count","get","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(u(e.content),F("200",!1)):(i(null),F("No data from the backend, please try again.",!1))}else i(null),F(null!==(e=null==l?void 0:l.message)&&void 0!==e?e:"❌ Authentication failed, please try again.",!1)}else{let e=await V("/createlink","get");F(null!==(l=null==e?void 0:e.message)&&void 0!==l?l:"⚠️ Internal server error, please try again.",!1)}}async function A(){if(1===p){let e=await V("/donators/find","get","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(b(e.content),F("200",!1)):(b(null),F("",!1))}else if(2===p){let e=await V("/donators/create","post","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(f(e.content),F("200",!1)):(f(null==e?void 0:e.content),F("",!1))}else if(3===p){let e=await V("/donators/renew","patch","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(f(e.content),F("200",!1)):(f(null==e?void 0:e.content),F("",!1))}else if(4===p){let e=await V("/donators/remove","delete","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(f(e.content),F("200",!1)):(f(null==e?void 0:e.content),F("",!1))}}async function I(e,l){if(1===e){let e=await V("/lavalink/servers","get","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(y(e.content),F("200",!1)):F("",!1)}else if(2===e){var t;let e=await V("/lavalink/rtcp","get","?index=".concat(l),!0);if((null==e?void 0:e.status)&&(null==e?void 0:null===(t=e.content)||void 0===t?void 0:t.endpoints)){let t=Object.entries(e.content.endpoints);t.sort((e,l)=>l[1].cumulative-e[1].cumulative),k[l].rtcp=t,y(k),F("200",!1)}else F("",!1)}}async function L(e){if(1===e){var l;let e=await V("/ga/topsongs","get","",!0);(null==e?void 0:e.status)&&(null==e?void 0:null===(l=e.content)||void 0===l?void 0:l.rows)?(D(e.content.rows.filter(e=>!e.dimensionValues.some(e=>"first_visit"===e.value)).map(e=>({id:e.dimensionValues[0].value,count:e.metricValues[0].value})).slice(0,10)),F("200",!1)):F("",!1)}}async function O(e,l,t){if(1===e){var a;let e=await V("/youtube/metadata","get",l,!0);(null==e?void 0:e.status)&&(null==e?void 0:null===(a=e.content)||void 0===a?void 0:a.items)?(R[t].metadata=e.content.items[0],D(R),F("200",!1)):F("",!1)}}async function M(e){if(1===e){let e=await V("/donators/flushcache","delete","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(N("success"),F("200",!1)):(N("failed to flush"),F("",!1))}}async function V(e,l,t,a){F("⌛ Requesting data from the backend...",!0);let s=await fetch("".concat("https://manybotapi.manybahtpage.com").concat(e).concat(null!=t?t:""),{method:l,credentials:a?"include":"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow"}),n=await s.json();return(null==n?void 0:n.status)!==null&&null!=n&&!!n.message&&n}function F(e,l){c(e),n(l)}return(0,s.useEffect)(()=>{let e=new Proxy(new URLSearchParams(window.location.search),{get:(e,l)=>e.get(l)}),l=null==e?void 0:e.code;l&&i(l),P()},[]),(0,a.jsxs)("main",{className:"bg-[#141519] flex flex-col min-h-svh pt-8 p-6 gap-4 "+(r?"items-center":"items-center justify-center"),children:[(0,a.jsxs)("div",{className:"flex flex-col w-full max-w-4xl gap-4 "+(r?"":"hidden"),children:[(0,a.jsx)("div",{className:"flex flex-row w-full justify-between",children:(0,a.jsxs)("h1",{className:"text-white text-xl font-bold",children:[(0,a.jsx)("span",{className:"text-orange-400",children:"Manybaht"}),"page ",(0,a.jsx)("span",{className:"opacity-50",children:"|"})," Admin Panel"]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:(0,a.jsxs)("div",{className:"bg-[#1d1e24] flex flex-col p-4 rounded-lg gap-2",children:[(0,a.jsxs)("p",{className:"text-white text-lg font-semibold",children:[(0,a.jsx)("span",{className:"text-[#f68fbe]",children:"⬤"})," Donators"]}),(0,a.jsx)("p",{className:"text-white text-lg",children:null==r?void 0:r.length})]})}),(0,a.jsxs)("div",{className:"bg-[#1d1e24] flex flex-col w-full p-4 rounded-lg gap-4",children:[(0,a.jsx)("p",{className:"text-white text-lg font-semibold",children:"Donators Management"}),(0,a.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row w-full max-sm:gap-2",children:[(0,a.jsx)("button",{disabled:t||1===p,onClick:()=>v(1),className:"bg-[#103148] px-4 p-2 w-full max-sm:rounded-lg sm:rounded-l-lg text-[#36a2ef] text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#071620] disabled:cursor-not-allowed "+(t?"animate-pulse":""),children:"FIND"}),(0,a.jsx)("button",{disabled:t||2===p,onClick:()=>v(2),className:"bg-[#103148] px-4 p-2 w-full max-sm:rounded-lg text-[#36a2ef] text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#071620] disabled:cursor-not-allowed "+(t?"animate-pulse":""),children:"CREATE"}),(0,a.jsx)("button",{disabled:t||3===p,onClick:()=>v(3),className:"bg-[#103148] px-4 p-2 w-full max-sm:rounded-lg text-[#36a2ef] text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#071620] disabled:cursor-not-allowed "+(t?"animate-pulse":""),children:"RENEW"}),(0,a.jsx)("button",{disabled:t||4===p,onClick:()=>v(4),className:"bg-[#481010] px-4 p-2 w-full max-sm:rounded-lg sm:rounded-r-lg text-[#ef3636] text-center cursor-pointer hover:bg-[#3a0d0d] disabled:bg-[#200707] disabled:cursor-not-allowed "+(t?"animate-pulse":""),children:"REMOVE"})]}),(0,a.jsxs)("div",{className:"flex flex-row w-full",children:[(0,a.jsx)("button",{disabled:t||x.length<=0,onClick:()=>A(),className:"bg-[#36a2ef] px-4 p-2 min-w-fit rounded-l-lg text-black font-medium text-center cursor-pointer hover:bg-[#2d8bce] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(t?"animate-pulse":""),children:"Submit"}),(0,a.jsx)("input",{disabled:t,value:x,onChange:e=>m(e.target.value),type:"text",className:"bg-[#16171c] pl-4 p-2 rounded-r-lg text-white w-full disabled:cursor-not-allowed disabled:bg-[#1E1E1E] "+(t?"animate-pulse":""),placeholder:"Donator ID"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 "+(g&&1===p?"":"hidden"),children:[(0,a.jsxs)("p",{className:"bg-[#16171c] px-4 p-2 w-fit rounded-lg text-white",children:["ID: ",null!==(e=null==g?void 0:g.id)&&void 0!==e?e:"Not found"]}),(0,a.jsxs)("p",{className:"px-4 p-2 w-fit rounded-lg relative "+(new Date/1e3-2592e3>(null==g?void 0:g.date)?"text-[#481010] bg-[#ef3636] font-semibold":"bg-[#16171c] text-white"),children:["Subscription ",new Date/1e3-2592e3>(null==g?void 0:g.date)?"expired":"till",": ",(null==g?void 0:g.date)?((l=new Date(1e3*g.date)).setDate(l.getDate()+30),new Intl.DateTimeFormat("en-GB",{timeZone:"Asia/Bangkok",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(l).replace(",","")):"Not found"]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2 "+(h&&1!==p?"":"hidden"),children:(0,a.jsx)("p",{className:"bg-[#16171c] px-4 p-2 w-fit rounded-lg text-white",children:null!=h?h:"No response from the backend"})})]}),(0,a.jsxs)("div",{className:"bg-[#1d1e24] flex flex-col w-full p-4 rounded-lg gap-4",children:[(0,a.jsx)("p",{className:"text-white text-lg font-semibold",children:"Bot Management"}),(0,a.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row w-full max-sm:gap-2",children:[(0,a.jsx)("button",{disabled:t||j,onClick:()=>M(1),className:"bg-[#481010] px-4 p-2 w-full max-sm:rounded-lg sm:rounded-l-lg text-[#ef3636] text-center cursor-pointer hover:bg-[#3a0d0d] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(t?"animate-pulse":""),children:"INVALIDATE DONATORS CACHE"}),(0,a.jsxs)("button",{disabled:t||j<=0,onClick:()=>E(j-1),className:"bg-[#103148] px-4 p-2 w-fit max-sm:rounded-lg sm:rounded-r-lg text-[#36a2ef] text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(t?"animate-pulse":""),children:["UNLOCK(",j,")"]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2 "+(w?"":"hidden"),children:(0,a.jsx)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:null!=w?w:"No response from the backend"})})]}),(0,a.jsxs)("div",{className:"bg-[#1d1e24] flex flex-col w-full p-4 rounded-lg gap-4",children:[(0,a.jsx)("p",{className:"text-white text-lg font-semibold",children:"Lavalink Management"}),(0,a.jsx)("button",{disabled:t,onClick:()=>I(1),className:"bg-[#103148] px-4 p-2 w-all rounded-lg text-[#36a2ef] text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(t?"animate-pulse":""),children:k?"REFRESH LAVALINK SERVER LIST":"REQUEST LAVALINK SERVER LIST"}),(0,a.jsx)("div",{className:"flex flex-col w-full "+(k?"":"hidden"),children:null==k?void 0:k.map((e,l)=>{var s,n;return(0,a.jsxs)("div",{className:"flex flex-col px-4 p-2 w-full border-[#343740] border-t-2 gap-2 "+(l%2==0?"bg-[#16171c]":""),children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("p",{className:"text-white",children:["Name: ",null==e?void 0:e.name]}),(0,a.jsx)("p",{onClick:()=>C(!1),className:"text-yellow-400 "+(S?"cursor-pointer":""),children:S?"Show IPv4":"IPv4: "+(null==e?void 0:e.ip)}),(0,a.jsxs)("p",{className:"text-white",children:["Port: ",null==e?void 0:e.port]}),(0,a.jsx)("p",{onClick:()=>C(!1),className:"text-yellow-400 "+(S?"cursor-pointer":""),children:S?"Show Password":"Password: "+(null==e?void 0:e.pass)}),(0,a.jsxs)("p",{className:"text-white",children:["Custom Status: ",null!==(n=null==e?void 0:e.custom)&&void 0!==n?n:"-"]}),(0,a.jsxs)("p",{className:"text-white",children:["Region: ",null==e?void 0:e.region]}),(0,a.jsxs)("p",{className:"text-white",children:["RTCP: ",(null==e?void 0:e.playback)?"Enabled":"Disabled"]})]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,a.jsx)("button",{disabled:t,onClick:()=>I(2,l),className:"bg-[#103148] px-2 p-1 w-all rounded-md text-[#36a2ef] text-sm text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(t?"animate-pulse":""),children:"Get RTCP Metrics"}),(0,a.jsx)("button",{disabled:!0,className:"bg-[#103148] px-2 p-1 w-all rounded-md text-[#36a2ef] text-sm text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(t?"animate-pulse":""),children:"Force Refresh PoToken"}),(0,a.jsx)("button",{disabled:!0,className:"bg-[#103148] px-2 p-1 w-all rounded-md text-[#36a2ef] text-sm text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(t?"animate-pulse":""),children:"Force Replace OAuth"})]}),null==e?void 0:null===(s=e.rtcp)||void 0===s?void 0:s.map((e,l)=>{var t,s,n,d,i,o,c;return(0,a.jsxs)("div",{className:"flex flex-col px-4 p-2 rounded-lg "+(l%2==0?"bg-[#1d1e24]":"bg-[#16171c]"),children:[(0,a.jsx)("p",{className:"text-white",children:null!==(d=null==e?void 0:e[0])&&void 0!==d?d:"Endpoint name not found"}),(0,a.jsxs)("p",{className:"text-white",children:["Connected: ",null!==(i=null==e?void 0:null===(t=e[1])||void 0===t?void 0:t.connected)&&void 0!==i?i:"-"]}),(0,a.jsxs)("p",{className:"text-white",children:["Cumulative: ",null!==(o=null==e?void 0:null===(s=e[1])||void 0===s?void 0:s.cumulative)&&void 0!==o?o:"-"]}),(0,a.jsxs)("p",{className:"text-white",children:["Rate: ",null!==(c=null==e?void 0:null===(n=e[1])||void 0===n?void 0:n.rate)&&void 0!==c?c:"-"]})]},l)})]},l)})})]}),(0,a.jsxs)("div",{className:"bg-[#1d1e24] flex flex-col w-full p-4 rounded-lg gap-4",children:[(0,a.jsx)("p",{className:"text-white text-lg font-semibold",children:"Google Analytics"}),(0,a.jsx)("button",{disabled:t,onClick:()=>L(1),className:"bg-[#103148] px-4 p-2 w-all rounded-lg text-[#36a2ef] text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(t?"animate-pulse":""),children:R?"REFRESH TOP SONGS":"REQUEST TOP SONGS"}),(0,a.jsx)("div",{className:"flex flex-col w-full "+(R?"":"hidden"),children:null==R?void 0:R.map((e,l)=>{var s,n,d,i,o,c,r,u,x,m;return(0,a.jsxs)("div",{className:"flex flex-col px-4 p-2 w-full border-[#343740] border-t-2 gap-2 "+(l%2==0?"bg-[#16171c]":""),children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[(0,a.jsxs)("p",{className:"text-white",children:["Video ID: ",null==e?void 0:e.id]}),(0,a.jsxs)("p",{className:"text-white",children:["Count: ",null==e?void 0:e.count]})]}),(0,a.jsx)("div",{className:"flex flex-col md:flex-row gap-2",children:(0,a.jsx)("button",{disabled:t,onClick:()=>O(1,"?videoid=".concat(null==e?void 0:e.id),l),className:"bg-[#103148] px-2 p-1 w-all rounded-md text-[#36a2ef] text-sm text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(t?"animate-pulse":""),children:"Get Video Metadata"})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 px-4 p-2 rounded-lg "+((null==e?void 0:e.metadata)?"":"hidden ")+(l%2==0?"bg-[#1d1e24]":"bg-[#16171c]"),children:[(0,a.jsx)("p",{className:"text-white",children:null!==(x=null==e?void 0:null===(n=e.metadata)||void 0===n?void 0:null===(s=n.snippet)||void 0===s?void 0:s.title)&&void 0!==x?x:"Title not found"}),(0,a.jsxs)("p",{className:"text-white",children:["\uD83D\uDC40 ",null!==(m=null==e?void 0:null===(i=e.metadata)||void 0===i?void 0:null===(d=i.statistics)||void 0===d?void 0:d.viewCount)&&void 0!==m?m:"viewCount not found"]}),(0,a.jsx)("img",{className:"object-cover rounded-lg",src:null==e?void 0:null===(u=e.metadata)||void 0===u?void 0:null===(r=u.snippet)||void 0===r?void 0:null===(c=r.thumbnails)||void 0===c?void 0:null===(o=c.maxres)||void 0===o?void 0:o.url})]})]},l)})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col w-full max-w-sm items-center gap-4 "+(r?"hidden":""),children:[(0,a.jsxs)("h1",{className:"text-white text-xl font-bold",children:[(0,a.jsx)("span",{className:"text-orange-400",children:"Manybaht"}),"page"]}),(0,a.jsx)("p",{className:"text-white",children:o}),(0,a.jsx)("button",{onClick:()=>T(),disabled:t,className:"bg-gradient-to-r from-amber-600 via-orange-600 to-pink-600 cursor-pointer animate-gradient p-2 w-full rounded-full text-white hover:from-amber-700 hover:via-orange-700 hover:to-pink-700 disabled:from-[#1E1E1E] disabled:via-[#1E1E1E] disabled:to-[#1E1E1E] disabled:cursor-not-allowed disabled:text-gray-700",children:d?"Login":"Request Link"})]}),(0,a.jsxs)("p",{className:"text-gray-600 w-full text-center",children:[new Date().getFullYear()," Manybaht."]})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=1282)}),_N_E=e.O()}]);