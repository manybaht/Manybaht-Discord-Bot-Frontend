(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1282:function(e,l,t){Promise.resolve().then(t.bind(t,8596))},8596:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return s}});var n=t(7437),a=t(2265);function s(){var e;let l;let[t,s]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null),[d,r]=(0,a.useState)("Loading..."),[c,u]=(0,a.useState)(null),[x,g]=(0,a.useState)(""),[m,b]=(0,a.useState)(1),[h,f]=(0,a.useState)(null),[p,w]=(0,a.useState)(null),[v,N]=(0,a.useState)(null),[j,E]=(0,a.useState)(5);async function y(){let e=await D("/donators/count","get","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(u(e.content),A("200",!1)):A("Manybot Management Panel",!1)}async function k(){var e,l;if(s(!0),i){let l=await D("/login","get","?code=".concat(i),!0);if((null==l?void 0:l.status)&&(null==l?void 0:l.message)){A(l.message,!1);let e=await D("/donators/count","get","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(u(e.content),A("200",!1)):(o(null),A("No data from the backend, please try again.",!1))}else o(null),A(null!==(e=null==l?void 0:l.message)&&void 0!==e?e:"❌ Authentication failed, please try again.",!1)}else{let e=await D("/createlink","get");A(null!==(l=null==e?void 0:e.message)&&void 0!==l?l:"⚠️ Internal server error, please try again.",!1)}}async function C(){if(1===m){let e=await D("/donators/find","get","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(f(e.content),A("200",!1)):(f(null),A("",!1))}else if(2===m){let e=await D("/donators/create","post","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(w(e.content),A("200",!1)):(w(null==e?void 0:e.content),A("",!1))}else if(3===m){let e=await D("/donators/renew","patch","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(w(e.content),A("200",!1)):(w(null==e?void 0:e.content),A("",!1))}else if(4===m){let e=await D("/donators/remove","delete","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(w(e.content),A("200",!1)):(w(null==e?void 0:e.content),A("",!1))}}async function S(e){if(1===e){let e=await D("/donators/flushcache","delete","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(N("success"),A("200",!1)):(N("failed to flush"),A("",!1))}}async function D(e,l,t,n){A("⌛ Requesting data from the backend...",!0);let a=await fetch("".concat("https://manybotapi.manybahtpage.com").concat(e).concat(null!=t?t:""),{method:l,credentials:n?"include":"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow"}),s=await a.json();return(null==s?void 0:s.status)!==null&&null!=s&&!!s.message&&s}function A(e,l){r(e),s(l)}return(0,a.useEffect)(()=>{let e=new Proxy(new URLSearchParams(window.location.search),{get:(e,l)=>e.get(l)}),l=null==e?void 0:e.code;l&&o(l),y()},[]),(0,n.jsxs)("main",{className:"bg-[#1A1A1A] flex flex-col min-h-svh pt-8 p-6 gap-4 "+(c?"items-center":"items-center justify-center"),children:[(0,n.jsxs)("div",{className:"flex flex-col w-full max-w-4xl gap-4 "+(c?"":"hidden"),children:[(0,n.jsx)("div",{className:"flex flex-row w-full justify-between",children:(0,n.jsxs)("h1",{className:"text-white text-xl font-bold",children:[(0,n.jsx)("span",{className:"text-orange-400",children:"Manybaht"}),"page ",(0,n.jsx)("span",{className:"opacity-50",children:"|"})," Admin Panel"]})}),(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:(0,n.jsxs)("div",{className:"bg-pink-800 flex flex-col p-4 rounded-lg gap-2",children:[(0,n.jsx)("p",{className:"text-white text-lg font-semibold",children:"Donators"}),(0,n.jsx)("p",{className:"text-white text-lg",children:null==c?void 0:c.length})]})}),(0,n.jsxs)("div",{className:"bg-neutral-950 flex flex-col w-full p-4 rounded-lg gap-4",children:[(0,n.jsx)("p",{className:"text-white text-lg font-semibold",children:"Donators Management"}),(0,n.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row w-full max-sm:gap-2",children:[(0,n.jsx)("button",{disabled:t||1===m,onClick:()=>b(1),className:"bg-blue-700 px-4 p-2 w-full max-sm:rounded-lg sm:rounded-l-lg text-white text-center cursor-pointer hover:bg-blue-800 disabled:bg-blue-950 disabled:cursor-not-allowed "+(t?"animate-pulse":""),children:"FIND"}),(0,n.jsx)("button",{disabled:t||2===m,onClick:()=>b(2),className:"bg-blue-700 px-4 p-2 w-full max-sm:rounded-lg text-white text-center cursor-pointer hover:bg-blue-800 disabled:bg-blue-950 disabled:cursor-not-allowed "+(t?"animate-pulse":""),children:"CREATE"}),(0,n.jsx)("button",{disabled:t||3===m,onClick:()=>b(3),className:"bg-blue-700 px-4 p-2 w-full max-sm:rounded-lg text-white text-center cursor-pointer hover:bg-blue-800 disabled:bg-blue-950 disabled:cursor-not-allowed "+(t?"animate-pulse":""),children:"RENEW"}),(0,n.jsx)("button",{disabled:t||4===m,onClick:()=>b(4),className:"bg-red-700 px-4 p-2 w-full max-sm:rounded-lg sm:rounded-r-lg text-white text-center cursor-pointer hover:bg-red-800 disabled:bg-red-950 disabled:cursor-not-allowed "+(t?"animate-pulse":""),children:"REMOVE"})]}),(0,n.jsxs)("div",{className:"flex flex-row w-full",children:[(0,n.jsx)("button",{disabled:t||x.length<=0,onClick:()=>C(),className:"bg-orange-600 px-4 p-2 min-w-fit rounded-l-lg text-white text-center cursor-pointer hover:bg-orange-700 disabled:bg-[#1E1E1E] disabled:cursor-not-allowed disabled:text-gray-700 "+(t?"animate-pulse":""),children:"Submit"}),(0,n.jsx)("input",{disabled:t,value:x,onChange:e=>g(e.target.value),type:"text",className:"bg-[#292929] pl-4 p-2 rounded-r-lg text-white w-full disabled:cursor-not-allowed disabled:bg-[#1E1E1E] "+(t?"animate-pulse":""),placeholder:"Donator ID"})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 "+(h&&1===m?"":"hidden"),children:[(0,n.jsxs)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:["ID: ",null!==(e=null==h?void 0:h.id)&&void 0!==e?e:"Not found"]}),(0,n.jsxs)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:["Subscription till: ",(null==h?void 0:h.date)?((l=new Date(1e3*h.date)).setDate(l.getDate()+30),new Intl.DateTimeFormat("en-GB",{timeZone:"Asia/Bangkok",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(l).replace(",","")):"Not found"]})]}),(0,n.jsx)("div",{className:"flex flex-col gap-2 "+(p&&1!==m?"":"hidden"),children:(0,n.jsx)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:null!=p?p:"No response from the backend"})})]}),(0,n.jsxs)("div",{className:"bg-neutral-950 flex flex-col w-full p-4 rounded-lg gap-4",children:[(0,n.jsx)("p",{className:"text-white text-lg font-semibold",children:"Bot Management"}),(0,n.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row w-full max-sm:gap-2",children:[(0,n.jsx)("button",{disabled:t||j,onClick:()=>S(1),className:"bg-red-700 px-4 p-2 w-full max-sm:rounded-lg sm:rounded-l-lg text-white text-center cursor-pointer hover:bg-red-800 disabled:bg-[#1E1E1E] disabled:cursor-not-allowed disabled:text-gray-700 "+(t?"animate-pulse":""),children:"INVALIDATE DONATORS CACHE"}),(0,n.jsxs)("button",{disabled:t,onClick:()=>E(j-1),className:"bg-blue-700 px-4 p-2 w-fit max-sm:rounded-lg sm:rounded-r-lg text-white text-center cursor-pointer hover:bg-blue-800 disabled:bg-blue-950 disabled:cursor-not-allowed "+(t?"animate-pulse":""),children:["UNLOCK(",j,")"]})]}),(0,n.jsx)("div",{className:"flex flex-col gap-2 "+(v?"":"hidden"),children:(0,n.jsx)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:null!=v?v:"No response from the backend"})})]})]}),(0,n.jsxs)("div",{className:"flex flex-col w-full max-w-sm items-center gap-4 "+(c?"hidden":""),children:[(0,n.jsxs)("h1",{className:"text-white text-xl font-bold",children:[(0,n.jsx)("span",{className:"text-orange-400",children:"Manybaht"}),"page"]}),(0,n.jsx)("p",{className:"text-white",children:d}),(0,n.jsx)("button",{onClick:()=>k(),disabled:t,className:"bg-gradient-to-r from-amber-600 via-orange-600 to-pink-600 cursor-pointer animate-gradient p-2 w-full rounded-full text-white hover:from-amber-700 hover:via-orange-700 hover:to-pink-700 disabled:from-[#1E1E1E] disabled:via-[#1E1E1E] disabled:to-[#1E1E1E] disabled:cursor-not-allowed disabled:text-gray-700",children:i?"Login":"Request Link"})]}),(0,n.jsxs)("p",{className:"text-gray-600 w-full text-center",children:[new Date().getFullYear()," Manybaht."]})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=1282)}),_N_E=e.O()}]);