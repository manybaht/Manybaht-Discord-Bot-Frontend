(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1282:function(e,t,l){Promise.resolve().then(l.bind(l,8596))},8596:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return s}});var a=l(7437),n=l(2265);function s(){var e;let t;let[l,s]=(0,n.useState)(!0),[d,i]=(0,n.useState)(null),[o,c]=(0,n.useState)("Loading..."),[r,u]=(0,n.useState)(null),[x,m]=(0,n.useState)(""),[g,f]=(0,n.useState)(1),[h,b]=(0,n.useState)(null),[p,w]=(0,n.useState)(null),[v,N]=(0,n.useState)(null),[j,y]=(0,n.useState)(5);async function E(){let e=await D("/donators/count","get","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(u(e.content),A("200",!1)):A("Manybot Management Panel",!1)}async function k(){var e,t;if(s(!0),d){let t=await D("/login","get","?code=".concat(d),!0);if((null==t?void 0:t.status)&&(null==t?void 0:t.message)){A(t.message,!1);let e=await D("/donators/count","get","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(u(e.content),A("200",!1)):(i(null),A("No data from the backend, please try again.",!1))}else i(null),A(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:"❌ Authentication failed, please try again.",!1)}else{let e=await D("/createlink","get");A(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"⚠️ Internal server error, please try again.",!1)}}async function C(){if(1===g){let e=await D("/donators/find","get","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(b(e.content),A("200",!1)):(b(null),A("",!1))}else if(2===g){let e=await D("/donators/create","post","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(w(e.content),A("200",!1)):(w(null==e?void 0:e.content),A("",!1))}else if(3===g){let e=await D("/donators/renew","patch","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(w(e.content),A("200",!1)):(w(null==e?void 0:e.content),A("",!1))}else if(4===g){let e=await D("/donators/remove","delete","?uid=".concat(x),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(w(e.content),A("200",!1)):(w(null==e?void 0:e.content),A("",!1))}}async function S(e){if(1===e){let e=await D("/donators/flushcache","delete","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(N("success"),A("200",!1)):(N("failed to flush"),A("",!1))}}async function D(e,t,l,a){A("⌛ Requesting data from the backend...",!0);let n=await fetch("".concat("https://manybotapi.manybahtpage.com").concat(e).concat(null!=l?l:""),{method:t,credentials:a?"include":"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow"}),s=await n.json();return(null==s?void 0:s.status)!==null&&null!=s&&!!s.message&&s}function A(e,t){c(e),s(t)}return(0,n.useEffect)(()=>{let e=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}),t=null==e?void 0:e.code;t&&i(t),E()},[]),(0,a.jsxs)("main",{className:"bg-[#141519] flex flex-col min-h-svh pt-8 p-6 gap-4 "+(r?"items-center":"items-center justify-center"),children:[(0,a.jsxs)("div",{className:"flex flex-col w-full max-w-4xl gap-4 "+(r?"":"hidden"),children:[(0,a.jsx)("div",{className:"flex flex-row w-full justify-between",children:(0,a.jsxs)("h1",{className:"text-white text-xl font-bold",children:[(0,a.jsx)("span",{className:"text-orange-400",children:"Manybaht"}),"page ",(0,a.jsx)("span",{className:"opacity-50",children:"|"})," Admin Panel"]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:(0,a.jsxs)("div",{className:"bg-[#1d1e24] flex flex-col p-4 rounded-lg gap-2",children:[(0,a.jsxs)("p",{className:"text-white text-lg font-semibold",children:[(0,a.jsx)("span",{className:"text-[#f68fbe]",children:"⬤"})," Donators"]}),(0,a.jsx)("p",{className:"text-white text-lg",children:null==r?void 0:r.length})]})}),(0,a.jsxs)("div",{className:"bg-[#1d1e24] flex flex-col w-full p-4 rounded-lg gap-4",children:[(0,a.jsx)("p",{className:"text-white text-lg font-semibold",children:"Donators Management"}),(0,a.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row w-full max-sm:gap-2",children:[(0,a.jsx)("button",{disabled:l||1===g,onClick:()=>f(1),className:"bg-[#103148] px-4 p-2 w-full max-sm:rounded-lg sm:rounded-l-lg text-[#36a2ef] text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#071620] disabled:cursor-not-allowed "+(l?"animate-pulse":""),children:"FIND"}),(0,a.jsx)("button",{disabled:l||2===g,onClick:()=>f(2),className:"bg-[#103148] px-4 p-2 w-full max-sm:rounded-lg text-[#36a2ef] text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#071620] disabled:cursor-not-allowed "+(l?"animate-pulse":""),children:"CREATE"}),(0,a.jsx)("button",{disabled:l||3===g,onClick:()=>f(3),className:"bg-[#103148] px-4 p-2 w-full max-sm:rounded-lg text-[#36a2ef] text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#071620] disabled:cursor-not-allowed "+(l?"animate-pulse":""),children:"RENEW"}),(0,a.jsx)("button",{disabled:l||4===g,onClick:()=>f(4),className:"bg-[#481010] px-4 p-2 w-full max-sm:rounded-lg sm:rounded-r-lg text-[#ef3636] text-center cursor-pointer hover:bg-[#3a0d0d] disabled:bg-[#200707] disabled:cursor-not-allowed "+(l?"animate-pulse":""),children:"REMOVE"})]}),(0,a.jsxs)("div",{className:"flex flex-row w-full",children:[(0,a.jsx)("button",{disabled:l||x.length<=0,onClick:()=>C(),className:"bg-[#36a2ef] px-4 p-2 min-w-fit rounded-l-lg text-black font-medium text-center cursor-pointer hover:bg-[#2d8bce] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(l?"animate-pulse":""),children:"Submit"}),(0,a.jsx)("input",{disabled:l,value:x,onChange:e=>m(e.target.value),type:"text",className:"bg-[#16171c] pl-4 p-2 rounded-r-lg text-white w-full disabled:cursor-not-allowed disabled:bg-[#1E1E1E] "+(l?"animate-pulse":""),placeholder:"Donator ID"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 "+(h&&1===g?"":"hidden"),children:[(0,a.jsxs)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:["ID: ",null!==(e=null==h?void 0:h.id)&&void 0!==e?e:"Not found"]}),(0,a.jsxs)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:["Subscription till: ",(null==h?void 0:h.date)?((t=new Date(1e3*h.date)).setDate(t.getDate()+30),new Intl.DateTimeFormat("en-GB",{timeZone:"Asia/Bangkok",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(t).replace(",","")):"Not found"]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2 "+(p&&1!==g?"":"hidden"),children:(0,a.jsx)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:null!=p?p:"No response from the backend"})})]}),(0,a.jsxs)("div",{className:"bg-[#1d1e24] flex flex-col w-full p-4 rounded-lg gap-4",children:[(0,a.jsx)("p",{className:"text-white text-lg font-semibold",children:"Bot Management"}),(0,a.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row w-full max-sm:gap-2",children:[(0,a.jsx)("button",{disabled:l||j,onClick:()=>S(1),className:"bg-[#481010] px-4 p-2 w-full max-sm:rounded-lg sm:rounded-l-lg text-[#ef3636] text-center cursor-pointer hover:bg-[#3a0d0d] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(l?"animate-pulse":""),children:"INVALIDATE DONATORS CACHE"}),(0,a.jsxs)("button",{disabled:l||j<=0,onClick:()=>y(j-1),className:"bg-[#103148] px-4 p-2 w-fit max-sm:rounded-lg sm:rounded-r-lg text-[#36a2ef] text-center cursor-pointer hover:bg-[#0d273a] disabled:bg-[#212229] disabled:cursor-not-allowed disabled:text-[#515761] "+(l?"animate-pulse":""),children:["UNLOCK(",j,")"]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2 "+(v?"":"hidden"),children:(0,a.jsx)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:null!=v?v:"No response from the backend"})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col w-full max-w-sm items-center gap-4 "+(r?"hidden":""),children:[(0,a.jsxs)("h1",{className:"text-white text-xl font-bold",children:[(0,a.jsx)("span",{className:"text-orange-400",children:"Manybaht"}),"page"]}),(0,a.jsx)("p",{className:"text-white",children:o}),(0,a.jsx)("button",{onClick:()=>k(),disabled:l,className:"bg-gradient-to-r from-amber-600 via-orange-600 to-pink-600 cursor-pointer animate-gradient p-2 w-full rounded-full text-white hover:from-amber-700 hover:via-orange-700 hover:to-pink-700 disabled:from-[#1E1E1E] disabled:via-[#1E1E1E] disabled:to-[#1E1E1E] disabled:cursor-not-allowed disabled:text-gray-700",children:d?"Login":"Request Link"})]}),(0,a.jsxs)("p",{className:"text-gray-600 w-full text-center",children:[new Date().getFullYear()," Manybaht."]})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=1282)}),_N_E=e.O()}]);