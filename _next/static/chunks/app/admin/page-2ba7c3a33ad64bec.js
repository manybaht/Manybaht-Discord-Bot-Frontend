(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1282:function(e,t,l){Promise.resolve().then(l.bind(l,8596))},8596:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return s}});var n=l(7437),a=l(2265);function s(){var e;let t;let[l,s]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null),[d,r]=(0,a.useState)("Loading..."),[c,u]=(0,a.useState)(null),[g,x]=(0,a.useState)(""),[h,m]=(0,a.useState)(1),[p,f]=(0,a.useState)(null),[b,w]=(0,a.useState)(null),[v,N]=(0,a.useState)(null);async function j(){let e=await k("/donators/count","get","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(u(e.content),C("200",!1)):C("Manybot Management Panel",!1)}async function E(){var e,t;if(s(!0),i){let t=await k("/login","get","?code=".concat(i),!0);if((null==t?void 0:t.status)&&(null==t?void 0:t.message)){C(t.message,!1);let e=await k("/donators/count","get","",!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(u(e.content),C("200",!1)):(o(null),C("No data from the backend, please try again.",!1))}else o(null),C(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:"❌ Authentication failed, please try again.",!1)}else{let e=await k("/createlink","get");C(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"⚠️ Internal server error, please try again.",!1)}}async function y(){if(1===h){let e=await k("/donators/find","get","?uid=".concat(g),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)?(f(e.content),C("200",!1)):(f(null),C("",!1))}else if(2===h){let e=await k("/donators/create","post","?uid=".concat(g),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(w(e.content),C("200",!1)):(w(null==e?void 0:e.content),C("",!1))}else if(3===h){let e=await k("/donators/renew","patch","?uid=".concat(g),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(w(e.content),C("200",!1)):(w(null==e?void 0:e.content),C("",!1))}else if(4===h){let e=await k("/donators/remove","delete","?uid=".concat(g),!0);(null==e?void 0:e.status)&&(null==e?void 0:e.content)==="success"?(w(e.content),C("200",!1)):(w(null==e?void 0:e.content),C("",!1))}}async function k(e,t,l,n){C("⌛ Requesting data from the backend...",!0);let a=await fetch("".concat("https://manybotapi.manybahtpage.com").concat(e).concat(null!=l?l:""),{method:t,credentials:n?"include":"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow"}),s=await a.json();return(null==s?void 0:s.status)!==null&&null!=s&&!!s.message&&s}function C(e,t){r(e),s(t)}return(0,a.useEffect)(()=>{let e=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}),t=null==e?void 0:e.code;t&&o(t),j()},[]),(0,n.jsxs)("main",{className:"bg-[#1A1A1A] flex flex-col min-h-svh pt-8 p-6 gap-4 "+(c?"items-center":"items-center justify-center"),children:[(0,n.jsxs)("div",{className:"flex flex-col w-full max-w-4xl gap-4 "+(c?"":"hidden"),children:[(0,n.jsx)("div",{className:"flex flex-row w-full justify-between",children:(0,n.jsxs)("h1",{className:"text-white text-xl font-bold",children:[(0,n.jsx)("span",{className:"text-orange-400",children:"Manybaht"}),"page ",(0,n.jsx)("span",{className:"opacity-50",children:"|"})," Admin Panel"]})}),(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:(0,n.jsxs)("div",{className:"bg-pink-800 flex flex-col p-4 rounded-lg gap-2",children:[(0,n.jsx)("p",{className:"text-white text-lg font-semibold",children:"Donators"}),(0,n.jsx)("p",{className:"text-white text-lg",children:null==c?void 0:c.length})]})}),(0,n.jsxs)("div",{className:"bg-neutral-950 flex flex-col w-full p-4 rounded-lg gap-4",children:[(0,n.jsx)("p",{className:"text-white text-lg font-semibold",children:"Donators Management"}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row w-full",children:[(0,n.jsx)("button",{disabled:l||1===h,onClick:()=>m(1),className:"bg-orange-600 px-4 p-2 w-full sm:rounded-l-lg text-white text-center cursor-pointer hover:bg-orange-700 disabled:bg-orange-950 disabled:cursor-not-allowed "+(l?"animate-pulse":""),children:"FIND"}),(0,n.jsx)("button",{disabled:l||2===h,onClick:()=>m(2),className:"bg-orange-600 px-4 p-2 w-full text-white text-center cursor-pointer hover:bg-orange-700 disabled:bg-orange-950 disabled:cursor-not-allowed "+(l?"animate-pulse":""),children:"CREATE"}),(0,n.jsx)("button",{disabled:l||3===h,onClick:()=>m(3),className:"bg-orange-600 px-4 p-2 w-full text-white text-center cursor-pointer hover:bg-orange-700 disabled:bg-orange-950 disabled:cursor-not-allowed "+(l?"animate-pulse":""),children:"RENEW"}),(0,n.jsx)("button",{disabled:l||4===h,onClick:()=>m(4),className:"bg-red-700 px-4 p-2 w-full sm:rounded-r-lg text-white text-center cursor-pointer hover:bg-red-800 disabled:bg-red-950 disabled:cursor-not-allowed "+(l?"animate-pulse":""),children:"REMOVE"})]}),(0,n.jsxs)("div",{className:"flex flex-row w-full",children:[(0,n.jsx)("button",{disabled:l||g.length<=0,onClick:()=>y(),className:"bg-orange-600 px-4 p-2 min-w-fit rounded-l-lg text-white text-center cursor-pointer hover:bg-orange-700 disabled:bg-[#1E1E1E] disabled:cursor-not-allowed disabled:text-gray-700 "+(l?"animate-pulse":""),children:"Submit"}),(0,n.jsx)("input",{disabled:l,value:g,onChange:e=>x(e.target.value),type:"text",className:"bg-[#292929] pl-4 p-2 rounded-r-lg text-white w-full disabled:cursor-not-allowed disabled:bg-[#1E1E1E] "+(l?"animate-pulse":""),placeholder:"Donator ID"})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 "+(p&&1===h?"":"hidden"),children:[(0,n.jsxs)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:["ID: ",null!==(e=null==p?void 0:p.id)&&void 0!==e?e:"Not found"]}),(0,n.jsxs)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:["Subscription till: ",(null==p?void 0:p.date)?((t=new Date(1e3*p.date)).setDate(t.getDate()+30),new Intl.DateTimeFormat("en-GB",{timeZone:"Asia/Bangkok",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(t).replace(",","")):"Not found"]})]}),(0,n.jsx)("div",{className:"flex flex-col gap-2 "+(b&&1!==h?"":"hidden"),children:(0,n.jsx)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:null!=b?b:"No response from the backend"})})]}),(0,n.jsxs)("div",{className:"bg-neutral-950 flex flex-col w-full p-4 rounded-lg gap-4",children:[(0,n.jsx)("p",{className:"text-white text-lg font-semibold",children:"Bot Management"}),(0,n.jsx)("button",{disabled:l,className:"bg-red-700 px-4 p-2 min-w-fit rounded-lg text-white text-center cursor-pointer hover:bg-red-800 disabled:bg-[#1E1E1E] disabled:cursor-not-allowed disabled:text-gray-700 "+(l?"animate-pulse":""),children:"INVALIDATE DONATORS CACHE"}),(0,n.jsx)("div",{className:"flex flex-col gap-2 "+(v?"":"hidden"),children:(0,n.jsx)("p",{className:"bg-neutral-900 px-4 p-1 w-fit rounded-lg text-white",children:null!=v?v:"No response from the backend"})})]})]}),(0,n.jsxs)("div",{className:"flex flex-col w-full max-w-sm items-center gap-4 "+(c?"hidden":""),children:[(0,n.jsxs)("h1",{className:"text-white text-xl font-bold",children:[(0,n.jsx)("span",{className:"text-orange-400",children:"Manybaht"}),"page"]}),(0,n.jsx)("p",{className:"text-white",children:d}),(0,n.jsx)("button",{onClick:()=>E(),disabled:l,className:"bg-gradient-to-r from-amber-600 via-orange-600 to-pink-600 cursor-pointer animate-gradient p-2 w-full rounded-full text-white hover:from-amber-700 hover:via-orange-700 hover:to-pink-700 disabled:from-[#1E1E1E] disabled:via-[#1E1E1E] disabled:to-[#1E1E1E] disabled:cursor-not-allowed disabled:text-gray-700",children:i?"Login":"Request Link"})]}),(0,n.jsxs)("p",{className:"text-gray-600 w-full text-center",children:[new Date().getFullYear()," Manybaht."]})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=1282)}),_N_E=e.O()}]);